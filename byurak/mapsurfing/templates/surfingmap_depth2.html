{% extends 'base.html' %}

{% block contents %}

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>


    <style>
        @import url(//fonts.googleapis.com/earlyaccess/notosanskr.css);

        #leftShowinglist {
            background-color: #Fff;
            width: 450px;
            height: 770px;
            border-radius: 3px;
            margin-right: 10px;
            padding: 0px 0 0px 0;

        }

        #leftShowinglist hr {
            border: 2px;

        }

        .location_list {
            width: 100%;
            height: 83%;
        }

        .location_list li {
            width: 95%;
            height: 14%;
            background-color: #E2DFD8;
            border: none;
            border-radius: 10px;
            margin-bottom: 15px;
            position: relative;
            margin-right: 5px;
            box-shadow: 2px 2px 3px 3px rgba(172, 169, 169, 0.3);

        }

        .location_list img {
            width: 35%;
            height: 70%;
            display: inline;
            margin: 10px 20px 0 0;
            float: left;
        }

        .location_list .titleSR {
            margin: 10px 0 0 30px;
            font-size: 25px;
            font-family: 'Noto Sans KR', sans-serif;
            font-weight: 500;
            text-align: left;
            color: #464545;
        }

        .location_list .reviewSR {
            margin: 10px 0 0 30px;
            font-size: 18px;
            font-family: 'Noto Sans KR', sans-serif;
            font-weight: 400;
            padding-right: 5px;
        }


        #map {
            width: 140%;
            height: 154%;
            position: relative;
        }

        #searchingResult {
            text-align: center;
            font-size: 30px;
            font-family: Noto SANSKR;
            margin-top: 3px;
        }

        .rating {
            display: flex;
            flex-direction: row-reverse;
            float: left;
            margin: 0 8px 0 30px
        }

        .rating>input {
            display: none
        }

        .rating>label {
            position: relative;
            width: 1em;
            font-size: 1vw;
            color: #ACCCC4;
            cursor: pointer
        }

        .rating>label::before {
            content: "\2605";
            position: absolute;
            opacity: 0
        }

        .rating>input:checked~label:before {
            opacity: 1
        }

        .rating:hover>input:checked~label:before {
            opacity: 1
        }
    </style>

</head>

<body>
    {% load static %}

    <div class="row" style="margin: 0% 0% 0 -33%; width: 157%">
        <div class="col-5" id="leftShowinglist">
            <div class=row style="background: #C6DFD6; margin: 0 0 0 0; height:60px; ">
                <div class="col-5" style="text-align: left; color:white; font-size: 28px; padding:2% 0 0 20px">
                    <span style="color:white">장소</span> 3개
                </div>
                <div class="col-7" style="text-align: right; color:white; font-size: 20px; padding:4% 20px 0 0">
                    정확도 순 | 인기도 순
                </div>

            </div>

            <div style="overflow:auto; width:100%; height:710px " class="location_list">
                <div class="row">
                    <div class="row-12">
                        <p class="titleSR">
                            <span style="color:#ACCCC4 ">A</span>
                            한수풀 해녀 체험학교
                            <span
                                style="font-weight:400; font-size:20px; margin-left:10px; color:rgb(206, 205, 203)">전통문화체험</span>
                        </p>
                    </div>
                    <div class="row-12">
                        <p class="reviewSR">더운 여름, 깨끗한 제주 바다에서 <br>싱싱한 해산물을 직접 잡아보세요!</p>

                        <p class="reviewSR"><span class="fa fa-map-marker"
                                style="color:#ACCCC4; margin:0 5px 0 0"></span>제주시 한림읍 한림해안로621</p>
                    </div>
                    <div class="row-12" style="text-align:left">

                        <div class="rating"> <input type="radio" name="rating" value="5" id="5" checked=True><label
                                for="5">★</label>
                            <input type="radio" name="rating" value="4" id="4"><label for="4">★</label>
                            <input type="radio" name="rating" value="3" id="3"><label for="3">★</label> <input
                                type="radio" name="rating" value="2" id="2"><label for="2">★</label> <input type="radio"
                                name="rating" value="1" id="1"><label for="1">★</label>
                        </div>
                        <p class="reviewSR" style="margin:2px 0 0 0px">
                            4.7
                            <span style="color:rgb(206, 205, 203); margin-left:30px">- 방문자 리뷰 323</span>
                        </p>
                    </div>
                    <div class="row" style="padding: 0 30px 0 30px; margin:0 0 0 0">
                        <div class="col-4">
                            <img src="{% static 'image/haenyu_2.jpg' %}" style="width:100%">
                        </div>
                        <div class="col-4">
                            <img src="{% static 'image/haenyu_3.jpg' %}" style="width:100%">
                        </div>
                        <div class="col-4">
                            <img src="{% static 'image/haenyu-exp.png' %}" style="width:100%">
                        </div>
                    </div>
                    <hr style="width:80%; margin:0 5% 0 8%">
                </div>
                <div class="row">
                    <div class="row-12">
                        <p class="titleSR">
                            <span style="color:#ACCCC4 ">B</span>
                            제주 올레 해녀
                            <span
                                style="font-weight:400; font-size:20px; margin-left:10px; color:rgb(206, 205, 203)">전통문화체험</span>
                        </p>
                    </div>
                    <div class="row-12">
                        <p class="reviewSR">아름다운 에메랄드 빛 제주바다  <br>직접 체험해보세요! <br> 직접 전복회를 떠드립니다!</p>

                        <p class="reviewSR"><span class="fa fa-map-marker"
                                style="color:#ACCCC4; margin:0 5px 0 0"></span>제주시 한림읍 한림해안로624</p>
                    </div>
                    <div class="row-12" style="text-align:left">

                        <div class="rating"> <input type="radio" name="rating" value="5" id="A_5" checked=True><label
                                for="5">☆</label>
                            <input type="radio" name="rating" value="4" id="4"><label for="A_4">★</label>
                            <input type="radio" name="rating" value="3" id="3"><label for="A_3">★</label> <input
                                type="radio" name="rating" value="2" id="2"><label for="A_2">★</label> <input type="radio"
                                name="rating" value="1" id="A_1"><label for="1">★</label>
                        </div>
                        <p class="reviewSR" style="margin:2px 0 0 0px">
                            4.1
                            <span style="color:rgb(206, 205, 203); margin-left:30px">- 방문자 리뷰 15</span>
                        </p>
                    </div>
                    <div class="row" style="padding: 0 30px 0 30px; margin:0 0 0 0">
                        <div class="col-4">
                            <img src="{% static 'image/haenyu_2.jpg' %}" style="width:100%">
                        </div>
                        <div class="col-4">
                            <img src="{% static 'image/haenyu_3.jpg' %}" style="width:100%">
                        </div>
                        <div class="col-4">
                            <img src="{% static 'image/haenyu-exp.png' %}" style="width:100%">
                        </div>
                    </div>
                    <hr style="width:80%; margin:0 5% 0 8%">
                </div>
                <div class="row">
                    <div class="row-12">
                        <p class="titleSR">
                            <span style="color:#ACCCC4 ">C</span>
                            제주 범계촌 해녀 체험
                            <span
                                style="font-weight:400; font-size:20px; margin-left:10px; color:rgb(206, 205, 203)">전통문화체험</span>
                        </p>
                    </div>
                    <div class="row-12">
                        <p class="reviewSR">더운 여름, 깨끗한 제주 바다에서 <br>싱싱한 해산물을 직접 잡아보세요!</p>

                        <p class="reviewSR"><span class="fa fa-map-marker"
                                style="color:#ACCCC4; margin:0 5px 0 0"></span>제주시 한림읍 한림해안로621</p>
                    </div>
                    <div class="row-12" style="text-align:left">

                        <div class="rating"> <input type="radio" name="rating" value="5" id="B_5" checked=True><label
                                for="B_5">☆</label>
                            <input type="radio" name="rating" value="4" id="B_4"><label for="B_4">☆</label>
                            <input type="radio" name="rating" value="3" id="B_3"><label for="B_3">☆</label> <input
                                type="radio" name="rating" value="2" id="B_2"><label for="B_2">☆</label> <input type="radio"
                                name="rating" value="1" id="B_1"><label for="B_1">☆</label>
                        </div>
                        <p class="reviewSR" style="margin:2px 0 0 0px">
                            4.7
                            <span style="color:rgb(206, 205, 203); margin-left:30px">- 방문자 리뷰 323</span>
                        </p>
                    </div>
                    <div class="row" style="padding: 0 30px 0 30px; margin:0 0 0 0">
                        <div class="col-4">
                            <img src="{% static 'image/haenyu_2.jpg' %}" style="width:100%">
                        </div>
                        <div class="col-4">
                            <img src="{% static 'image/haenyu_3.jpg' %}" style="width:100%">
                        </div>
                        <div class="col-4">
                            <img src="{% static 'image/haenyu-exp.png' %}" style="width:100%">
                        </div>
                    </div>
                    <hr style="width:80%; margin:0 5% 0 8%">
                </div>
            </div>

        </div>

        <div class=col-7 style="margin-left: -20px;">
            <div class="map_wrap">
                <div id="map"></div>
            </div>
        </div>
        <div class=col-1>
        </div>
    </div>

    <script type="text/javascript"
        src="//dapi.kakao.com/v2/maps/sdk.js?appkey={{KAKAO_MAP_KEY}}&libraries=clusterer"></script>

        <script>
                var mapContainer = document.getElementById('map'), // 지도를 표시할 div 
                    mapOption = {
                        center: new kakao.maps.LatLng(33.44264612313687, 126.27865845577452), // 지도의 중심좌표
                        level: 2 // 지도의 확대 레벨
                    };
                var map = new kakao.maps.Map(mapContainer, mapOption);
                // 마커 클러스터러를 생성합니다 
                var clusterer = new kakao.maps.MarkerClusterer({
                    map: map, // 마커들을 클러스터로 관리하고 표시할 지도 객체 
                    averageCenter: true, // 클러스터에 포함된 마커들의 평균 위치를 클러스터 마커 위치로 설정 
                    minLevel: 8 // 클러스터 할 최소 지도 레벨 
                });
                var map_coordinate_data = [
                    [33.44264612313687, 126.27865845577452, '<div style="padding:5px; font-size:12px">A 한수풀 해녀 체험학교<span class="fa fa-times" style="margin-left:146px; font-size:20px; font-weight:100"></span></div>'],
                    [33.44218954202365, 126.27797181029722, '<div style="padding:5px">제주 </div>'],
                    [33.442082110824536, 126.27943093194602, '<div style="padding:5px">서울대학교</div>'],
                    [35.84648059644505, 127.12891076848453, '<div style="padding:5px">전북대학교</div>'],
                    [35.889341095263866, 128.61030430454034, '<div style="padding:5px">경북대학교</div>']
                ]
                var markers = [];
                for (var i = 0; i < map_coordinate_data.length; i++) {
                    // 마커가 표시될 위치입니다 
                    var markerPosition = new kakao.maps.LatLng(map_coordinate_data[i][0], map_coordinate_data[i][1]);
                    // 마커를 생성합니다
                    var imageSrc = 'https://t1.daumcdn.net/localimg/localimages/07/mapapidoc/marker_red.png', // 마커이미지의 주소입니다    
                        imageSize = new kakao.maps.Size(32, 34), // 마커이미지의 크기입니다
                        imageOption = { offset: new kakao.maps.Point(27, 69) }; // 마커이미지의 옵션입니다. 마커의 좌표와 일치시킬 이미지 안에서의 좌표를 설정합니다.
            
                    var markerImage = new kakao.maps.MarkerImage(imageSrc, imageSize, imageOption);
                    var marker = new kakao.maps.Marker({
                        position: markerPosition,
                        image: markerImage
                    });
                    displayMarker(marker, map_coordinate_data);
            
                }
            
            
            
                function displayMarker(marker, map_coordinate_data) {
                    // 마커가 지도 위에 표시되도록 설정합니다
                    marker.setMap(map);
                    var iwContent = '<div class="wrap">' +
                        '    <div class="info">' +
                        '        <div class="title">' +
                        '            카카오 스페이스닷원' +
                        '            <div class="close" title="닫기"></div>' +
                        '        </div>' +
                        '        <div class="body">' +
                        '            <div class="img">' +
                        '                <img src="https://cfile181.uf.daum.net/image/250649365602043421936D" width="73" height="70">' +
                        '           </div>' +
                        '            <div class="desc">' +
                        '                <div class="ellipsis">제주시 한림읍 한림해안로621</div>' +
                        '                <div class="jibun ellipsis">(우) 63309 (지번) 영평동 2181</div>' +
                        '                <div><a href="https://www.kakaocorp.com/main" target="_blank" class="link">홈페이지</a></div>' +
                        '            </div>' +
                        '        </div>' +
                        '    </div>' +
                        '</div>';
                    // var iwContent = map_coordinate_data[i][2] // 인포윈도우에 표출될 내용으로 HTML 문자열이나 document element가 가능합니다
            
                    iwPosition = new kakao.maps.LatLng(map_coordinate_data[i][0], map_coordinate_data[i][1]);//인포윈도우 표시 위치입니다
                    // 인포윈도우를 생성합니다
            
                    var overlay = new kakao.maps.CustomOverlay({
                        map: map,
                        position: iwPosition,
                        content: iwContent,
                    });
            
                    // 마커 위에 인포윈도우를 표시합니다. 두번째 파라미터인 marker를 넣어주지 않으면 지도 위에 표시됩니다
                    markers.push(marker);
                    // 마커에 mouseover 이벤트와 mouseout 이벤트를 등록합니다
                    // 이벤트 리스너로는 클로저를 만들어 등록합니다 
                    // for문에서 클로저를 만들어 주지 않으면 마지막 마커에만 이벤트가 등록됩니다
                    //kakao.maps.event.addListener(marker, 'mouseover', makeOverListener(map, marker, customOverlay));
                    //kakao.maps.event.addListener(marker, 'mouseout', makeOutListener(customOverlay));
                    overlay.setMap(null)
                    // var content = document.createElement('div');
                    // content.style.cssText='backgroud-color:white; height:100px';
            
                    var contentText = document.createElement('div')
                    contentText.innerHTML = '<div class="wrap" >' +
                        '    <div class="info">' +
                        '        <div class="title">' +
                        map_coordinate_data[i][2] +
                        '        </div>' +
                        '        <div class="body">' +
                        '            <div class="img">' +
                        '                <img src="' + '{% static "image/haenyu.jpg" %}' + '" height="100">' +
                            '           </div>' +
                            '            <div class="desc">' +
                            '                <div class="ellipsis">제주시 한림읍 한림해안로621</div>' +
                            '                <div class="jibun ellipsis">(우) 63309 (지번) 영평동 2181</div>' +
                            '                <div><a href=\"{% url 'profile' 13 %}\" target="_blank" class="link">보러가기</a></div>' +
                            '            </div>' +
                            '        </div>' +
                            '    </div>' +
                            '</div>';
            
                    // content.appendChild(contentText);
                    //var closeBtn = document.createElement('button');
                    //closeBtn.setAttribute("id", "mapBtn");
                    //closeBtn.innerHTML = 'x';
                    //closeBtn.onclick = function () {
                   //     overlay.setMap(null);
                    //};
                    //contentText.appendChild(closeBtn);
            
                    //document.body.getElementsByClassName('close').appendChild(closeBtn)
            
                    // content.appendChild(test);
                    overlay.setContent(contentText);
            
                    kakao.maps.event.addListener(marker, 'click', function () {
                        overlay.setMap(map);
                    });
            
            
                }
            
                // 커스텀 오버레이를 닫기 위해 호출되는 함수입니다 
            
                // 클러스터러에 마커들을 추가합니다
                //clusterer.addMarkers(markers);
                // 인포윈도우를 표시하는 클로저를 만드는 함수입니다 
            
                // 지도 레벨을 표시합니다
                displayLevel();
            
                // 지도 레벨은 지도의 확대 수준을 의미합니다
                // 지도 레벨은 1부터 14레벨이 있으며 숫자가 작을수록 지도 확대 수준이 높습니다
                function zoomIn() {
                    // 현재 지도의 레벨을 얻어옵니다
                    var level = map.getLevel();
            
                    // 지도를 1레벨 내립니다 (지도가 확대됩니다)
                    map.setLevel(level - 1);
            
                    // 지도 레벨을 표시합니다
                    displayLevel();
                }
                function zoomOut() {
                    // 현재 지도의 레벨을 얻어옵니다
                    var level = map.getLevel();
            
                    // 지도를 1레벨 올립니다 (지도가 축소됩니다)
                    map.setLevel(level + 1);
            
                    // 지도 레벨을 표시합니다
                    displayLevel();
                }
            
            </script>
</body>

</html>
{% endblock %}